{"version":3,"sources":["create-fragment.js"],"names":["define","noder","createElement","fragmentRE","singleTagRE","div","document","table","tableBody","tableRow","containers","tr","tbody","thead","tfoot","td","th","*","slice","Array","prototype","createFragment","html","strings","trim","test","RegExp","$1","name","container","innerHTML","xml","split","newXml","i","length","edsplit","removeSelfClosingTags","dom","call","childNodes","forEach","node","removeChild"],"mappings":";;;;;;;AAAAA,QACI,wBACH,UACG,oBACF,SAASC,EAAMC,GACb,IAAIC,EAAa,qBACbC,EAAc,6BACdC,EAAMC,SAASJ,cAAc,OAC7BK,EAAQD,SAASJ,cAAc,SAC/BM,EAAYF,SAASJ,cAAc,SACnCO,EAAWH,SAASJ,cAAc,MAClCQ,GACIC,GAAMH,EACNI,MAASL,EACTM,MAASN,EACTO,MAASP,EACTQ,GAAMN,EACNO,GAAMP,EACNQ,IAAKZ,GAETa,EAAQC,MAAMC,UAAUF,MAyC/B,OAAOjB,EAAMoB,eAvBV,SAAwBC,GAGpB,GADAA,EAAOC,QAAQC,KAAKF,GAChBlB,EAAYqB,KAAKH,GACjB,OAAQpB,EAAcwB,OAAOC,KAGjC,IAAIC,EAAOzB,EAAWsB,KAAKH,IAASI,OAAOC,GACrCC,KAAQlB,IACVkB,EAAO,KAEX,IAAIC,EAAYnB,EAAWkB,GAQ3B,OAPAC,EAAUC,UA3Bd,SAA+BC,GAG3B,IAFA,IAAIC,EAAQD,EAAIC,MAAM,MAClBC,EAAS,GACJC,EAAI,EAAGA,EAAIF,EAAMG,OAAS,EAAED,IAAK,CACtC,IAAIE,EAAUJ,EAAME,GAAGF,MAAM,KAC7BC,GAAUD,EAAME,GAAK,MAAQE,EAAQA,EAAQD,OAAS,GAAGH,MAAM,KAAK,GAAK,IAE7E,OAAOC,EAASD,EAAMA,EAAMG,OAAO,GAoBbE,CAAsB,GAAKf,GACjDgB,IAAMpB,EAAMqB,KAAKV,EAAUW,YAE3BF,IAAIG,QAAQ,SAASC,GACjBb,EAAUc,YAAYD,KAGnBJ","file":"../create-fragment.js","sourcesContent":["define([\r\n    \"skylark-langx-strings\",\r\n\t\"./noder\",\r\n    \"./create-element\"\r\n],function(noder,createElement){\r\n    var fragmentRE = /^\\s*<(\\w+|!)[^>]*>/,\r\n        singleTagRE = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\r\n        div = document.createElement(\"div\"),\r\n        table = document.createElement('table'),\r\n        tableBody = document.createElement('tbody'),\r\n        tableRow = document.createElement('tr'),\r\n        containers = {\r\n            'tr': tableBody,\r\n            'tbody': table,\r\n            'thead': table,\r\n            'tfoot': table,\r\n            'td': tableRow,\r\n            'th': tableRow,\r\n            '*': div\r\n        },\r\n        slice = Array.prototype.slice;\r\n\r\n\r\n    function removeSelfClosingTags(xml) {\r\n        var split = xml.split(\"/>\");\r\n        var newXml = \"\";\r\n        for (var i = 0; i < split.length - 1;i++) {\r\n            var edsplit = split[i].split(\"<\");\r\n            newXml += split[i] + \"></\" + edsplit[edsplit.length - 1].split(\" \")[0] + \">\";\r\n        }\r\n        return newXml + split[split.length-1];\r\n    }\r\n\r\n\r\n    /*   \r\n     * Create a DocumentFragment from the HTML fragment.\r\n     * @param {String} html\r\n     */\r\n    function createFragment(html) {\r\n        // A special case optimization for a single tag\r\n        html = strings.trim(html);\r\n        if (singleTagRE.test(html)) {\r\n            return [createElement(RegExp.$1)];\r\n        }\r\n\r\n        var name = fragmentRE.test(html) && RegExp.$1\r\n        if (!(name in containers)) {\r\n            name = \"*\"\r\n        }\r\n        var container = containers[name];\r\n        container.innerHTML = removeSelfClosingTags(\"\" + html);\r\n        dom = slice.call(container.childNodes);\r\n\r\n        dom.forEach(function(node) {\r\n            container.removeChild(node);\r\n        })\r\n\r\n        return dom;\r\n    }\r\n\r\n\t\r\n\treturn noder.createFragment = createFragment;\r\n});"]}